# Story 9.3: Version Bump to 1.0.0

## Status

Done
## Story

**As a** library maintainer,
**I want** to bump the version of `@crosstown/core`, `@crosstown/bls`, and `@crosstown/relay` from `0.1.0` to `1.0.0`,
**so that** the packages are versioned appropriately for their first public npm release, signaling API stability to consumers.

## Acceptance Criteria

1. `packages/core/package.json` has `"version": "1.0.0"`
2. `packages/bls/package.json` has `"version": "1.0.0"`
3. `packages/relay/package.json` has `"version": "1.0.0"`
4. The root `package.json` version is NOT changed (stays `0.1.0`, it is `"private": true` and not published)
5. The `@crosstown/examples` package version is NOT changed (stays `0.1.0`, it is `"private": true`)
6. No changes to public API surface, exports, build system, dependencies, or dependency versions
7. `pnpm build` succeeds with no errors across all packages
8. `pnpm test` passes with no regressions

## Tasks / Subtasks

- [x] Task 1: Bump `@crosstown/core` version to `1.0.0` (AC: 1, 6)
  - [x] Open `packages/core/package.json`
  - [x] Change `"version": "0.1.0"` to `"version": "1.0.0"` (line 3)
  - [x] Verify no other fields were modified

- [x] Task 2: Bump `@crosstown/bls` version to `1.0.0` (AC: 2, 6)
  - [x] Open `packages/bls/package.json`
  - [x] Change `"version": "0.1.0"` to `"version": "1.0.0"` (line 3)
  - [x] Verify no other fields were modified

- [x] Task 3: Bump `@crosstown/relay` version to `1.0.0` (AC: 3, 6)
  - [x] Open `packages/relay/package.json`
  - [x] Change `"version": "0.1.0"` to `"version": "1.0.0"` (line 3)
  - [x] Verify no other fields were modified

- [x] Task 4: Verify excluded packages are unchanged (AC: 4, 5)
  - [x] Confirm `package.json` (root) still has `"version": "0.1.0"` and `"private": true`
  - [x] Confirm `packages/examples/package.json` still has `"version": "0.1.0"` and `"private": true`

- [x] Task 5: Verify `workspace:*` references are NOT changed (AC: 6)
  - [x] Confirm `packages/relay/package.json` still has `"@crosstown/bls": "workspace:*"` and `"@crosstown/core": "workspace:*"` in dependencies
  - [x] Confirm `packages/core/package.json` still has `"@crosstown/relay": "workspace:*"` in devDependencies
  - [x] Confirm `packages/examples/package.json` still has `workspace:*` references unchanged
  - [x] Note: `workspace:*` resolution to `^1.0.0` version ranges is handled in Story 9.4, NOT this story

- [x] Task 6: Run build and test validation (AC: 7, 8)
  - [x] Run `pnpm build` — all packages build successfully
  - [x] Run `pnpm test` — all tests pass with no regressions

## Dev Notes

### Previous Story Insights
[Source: docs/stories/9.2.story.md — Dev Agent Record]

Story 9.2 (Add README.md to Core and Relay) was documentation-only. Key insights:
- `pnpm build` passes for all three target packages (core, bls, relay). `ui-prototypes` build failure is pre-existing (TS6133 unused variable errors) and unrelated to this epic.
- `pnpm test`: 1020 passed, 2 failed — both failures are **pre-existing** (`SocialPeerDiscovery.test.ts` and `RelayMonitor.test.ts` have `subscribeMany` call signature assertion mismatches unrelated to this epic).
- These pre-existing failures should be expected again in this story's validation.
- No code, config, or dependency changes were made in 9.2 — just two README files.

### Current Package Versions
[Source: packages/core/package.json, packages/bls/package.json, packages/relay/package.json]

All three publishable packages are currently at `"version": "0.1.0"`:
- `packages/core/package.json` — line 3: `"version": "0.1.0"`
- `packages/bls/package.json` — line 3: `"version": "0.1.0"`
- `packages/relay/package.json` — line 3: `"version": "0.1.0"`

Non-publishable packages (NOT to be changed):
- `package.json` (root) — line 3: `"version": "0.1.0"`, has `"private": true`
- `packages/examples/package.json` — line 3: `"version": "0.1.0"`, has `"private": true`

### Workspace References — Do NOT Change
[Source: packages/relay/package.json, packages/core/package.json, packages/examples/package.json]

The `workspace:*` references remain as-is in this story. They will be resolved to `^1.0.0` in **Story 9.4**.

Current workspace references:
- `packages/relay/package.json` dependencies: `"@crosstown/bls": "workspace:*"`, `"@crosstown/core": "workspace:*"`
- `packages/core/package.json` devDependencies: `"@crosstown/relay": "workspace:*"`
- `packages/examples/package.json` dependencies: `"@crosstown/core": "workspace:*"`, `"@crosstown/relay": "workspace:*"`

These must all remain exactly as-is after this story.

### What NOT to Change
[Source: docs/epics/epic-9-npm-package-publishing.md]

- Package names — no changes
- Public API surface — no exports added or removed
- Build system (tsup) — no changes
- Test suites — no changes
- Dependencies or dependency versions — no changes
- `workspace:*` references — no changes (Story 9.4)
- `@crosstown/examples` stays `"private": true` at `0.1.0`
- Root `package.json` stays `"private": true` at `0.1.0`

### File Locations

Files to modify:
- `packages/core/package.json` — Change version `0.1.0` → `1.0.0`
- `packages/bls/package.json` — Change version `0.1.0` → `1.0.0`
- `packages/relay/package.json` — Change version `0.1.0` → `1.0.0`

Files NOT modified:
- `package.json` (root) — Stays at `0.1.0`, private
- `packages/examples/package.json` — Stays at `0.1.0`, private
- All source files (`src/**`) — No code changes
- All test files — No test changes
- All README files — No documentation changes

### Project Structure Notes
[Source: docs/architecture/9-source-tree.md]

The three publishable packages are at:
```
packages/
├── core/     # @crosstown/core — bump to 1.0.0
├── bls/      # @crosstown/bls — bump to 1.0.0
├── relay/    # @crosstown/relay — bump to 1.0.0
└── examples/ # @crosstown/examples — stays at 0.1.0 (private)
```

No structural conflicts identified.

### Technical Constraints

- **JSON-only changes:** This story only modifies the `version` field in three `package.json` files. No TypeScript code changes.
- **Exact change:** Only the `"version"` field changes from `"0.1.0"` to `"1.0.0"`. No other fields in any package.json are touched.
- **pnpm workspace compatibility:** Changing the version in workspace packages does not break `workspace:*` resolution. pnpm resolves `workspace:*` to the local package regardless of version. This has no effect on local development or testing.
- **Semantic versioning:** `1.0.0` signals the first stable public release per SemVer conventions.

### Testing
[Source: docs/architecture/13-test-strategy-and-standards.md]

- **Test framework:** Vitest 1.x
- **No new tests required for this story** — version field changes don't require unit tests
- **Validation:** Run `pnpm build` and `pnpm test` to confirm no regressions
- **Expected results:** ~1020 tests pass, 2 pre-existing failures (same as Stories 9.1 and 9.2):
  - `SocialPeerDiscovery.test.ts` — `subscribeMany` call signature assertion mismatch
  - `RelayMonitor.test.ts` — `subscribeMany` call signature assertion mismatch

## Dev Agent Record

### Agent Model Used
Claude Opus 4.6

### File List
| File | Action | Description |
|------|--------|-------------|
| `packages/core/package.json` | Modified | Version bumped from `0.1.0` to `1.0.0` |
| `packages/bls/package.json` | Modified | Version bumped from `0.1.0` to `1.0.0` |
| `packages/relay/package.json` | Modified | Version bumped from `0.1.0` to `1.0.0` |

### Debug Log References
No issues encountered.

### Completion Notes
- All three publishable packages bumped to `1.0.0`
- Root `package.json` and `packages/examples/package.json` confirmed unchanged at `0.1.0` with `"private": true`
- All `workspace:*` references confirmed intact across relay, core, and examples packages
- `pnpm build` passes for core, bls, relay (ui-prototypes failure is pre-existing TS6133, unrelated)
- `pnpm test`: 1020 passed, 2 failed — same 2 pre-existing failures as Stories 9.1/9.2 (`SocialPeerDiscovery.test.ts` and `RelayMonitor.test.ts` subscribeMany assertion mismatches)
- Zero regressions introduced

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-11 | 0.1 | Initial story draft | SM (Claude Opus 4.6) |
| 2026-02-11 | 1.0 | Implementation complete — version bumps applied and validated | Dev (Claude Opus 4.6) |

## QA Results

### Review Date: 2026-02-11

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Excellent. This story is a minimal, surgical change — exactly 1 field (`"version"`) modified in exactly 3 `package.json` files. No code, no dependencies, no build system changes. The implementation precisely matches the acceptance criteria with zero scope creep.

### Refactoring Performed

None required. The change is a single JSON field value update in 3 files.

### Compliance Check

- Coding Standards: N/A — no TypeScript code changes
- Project Structure: ✓ — correct packages modified, excluded packages untouched
- Testing Strategy: ✓ — no new tests required for version-only changes; build and test validation performed
- All ACs Met: ✓ — all 8 acceptance criteria verified independently (see evidence below)

### AC Verification Evidence

| AC | Status | Verification |
|----|--------|-------------|
| 1 | ✓ | `packages/core/package.json` line 3: `"version": "1.0.0"` |
| 2 | ✓ | `packages/bls/package.json` line 3: `"version": "1.0.0"` |
| 3 | ✓ | `packages/relay/package.json` line 3: `"version": "1.0.0"` |
| 4 | ✓ | Root `package.json` line 3: `"version": "0.1.0"`, line 4: `"private": true` |
| 5 | ✓ | `packages/examples/package.json` line 3: `"version": "0.1.0"`, line 4: `"private": true` |
| 6 | ✓ | Git diff confirms only `version` field changed. `workspace:*` refs intact in relay (bls, core), core (relay), examples (core, relay). No export/dependency changes. |
| 7 | ✓ | `pnpm build` succeeds for core, bls, relay. (ui-prototypes failure is pre-existing TS6133, unrelated.) |
| 8 | ✓ | `pnpm test`: 1020 passed, 2 failed — same 2 pre-existing failures (SocialPeerDiscovery.test.ts, RelayMonitor.test.ts subscribeMany assertion mismatches). Zero regressions. |

### Improvements Checklist

No improvements needed — implementation is complete and correct.

### Security Review

No security concerns. Version field changes have no runtime impact.

### Performance Considerations

No performance concerns. Version field is metadata only.

### Files Modified During Review

None. No changes needed.

### Gate Status

Gate: PASS → docs/qa/gates/9.3-version-bump-to-1-0-0.yml
Risk profile: Low — JSON metadata-only change, no executable code touched.

### Recommended Status

✓ Ready for Done
