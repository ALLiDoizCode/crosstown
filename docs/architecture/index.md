# Agent Society Protocol Architecture Document

## Table of Contents

- [Agent Society Protocol Architecture Document](#table-of-contents)
  - [1. Introduction](./1-introduction.md)
    - [1.1 Starter Template or Existing Project](./1-introduction.md#11-starter-template-or-existing-project)
    - [1.2 Change Log](./1-introduction.md#12-change-log)
  - [2. High Level Architecture](./2-high-level-architecture.md)
    - [2.1 Technical Summary](./2-high-level-architecture.md#21-technical-summary)
    - [2.2 High Level Overview](./2-high-level-architecture.md#22-high-level-overview)
    - [2.3 High Level Project Diagram](./2-high-level-architecture.md#23-high-level-project-diagram)
    - [2.4 Architectural and Design Patterns](./2-high-level-architecture.md#24-architectural-and-design-patterns)
  - [3. Tech Stack](./3-tech-stack.md)
    - [3.1 Cloud Infrastructure](./3-tech-stack.md#31-cloud-infrastructure)
    - [3.2 Technology Stack Table](./3-tech-stack.md#32-technology-stack-table)
  - [4. Data Models](./4-data-models.md)
    - [4.1 IlpPeerInfo](./4-data-models.md#41-ilppeerinfo)
    - [4.2 SpspInfo](./4-data-models.md#42-spspinfo)
    - [4.3 SpspRequest](./4-data-models.md#43-spsprequest)
    - [4.4 SpspResponse](./4-data-models.md#44-spspresponse)
    - [4.5 TrustScore](./4-data-models.md#45-trustscore)
    - [4.6 NostrEvent (External)](./4-data-models.md#46-nostrevent-external)
  - [5. Components](./5-components.md)
    - [5.1 @agent-society/core](./5-components.md#51-agent-societycore)
    - [5.2 @agent-society/relay](./5-components.md#52-agent-societyrelay)
    - [5.3 @agent-society/examples](./5-components.md#53-agent-societyexamples)
    - [5.4 Component Diagram](./5-components.md#54-component-diagram)
  - [6. External APIs](./6-external-apis.md)
    - [6.1 Nostr Relays](./6-external-apis.md#61-nostr-relays)
    - [6.2 agent-runtime Admin API](./6-external-apis.md#62-agent-runtime-admin-api)
  - [7. Core Workflows](./7-core-workflows.md)
    - [7.1 Peer Discovery Flow](./7-core-workflows.md#71-peer-discovery-flow)
    - [7.2 Dynamic SPSP Handshake](./7-core-workflows.md#72-dynamic-spsp-handshake)
    - [7.3 ILP-Gated Relay Write Flow](./7-core-workflows.md#73-ilp-gated-relay-write-flow)
  - [8. Database Schema](./8-database-schema.md)
  - [9. Source Tree](./9-source-tree.md)
  - [10. Infrastructure and Deployment](./10-infrastructure-and-deployment.md)
    - [10.1 Infrastructure as Code](./10-infrastructure-and-deployment.md#101-infrastructure-as-code)
    - [10.2 Deployment Strategy](./10-infrastructure-and-deployment.md#102-deployment-strategy)
    - [10.3 Environments](./10-infrastructure-and-deployment.md#103-environments)
    - [10.4 Environment Promotion Flow](./10-infrastructure-and-deployment.md#104-environment-promotion-flow)
    - [10.5 Rollback Strategy](./10-infrastructure-and-deployment.md#105-rollback-strategy)
  - [11. Error Handling Strategy](./11-error-handling-strategy.md)
    - [11.1 General Approach](./11-error-handling-strategy.md#111-general-approach)
    - [11.2 Logging Standards](./11-error-handling-strategy.md#112-logging-standards)
    - [11.3 Error Handling Patterns](./11-error-handling-strategy.md#113-error-handling-patterns)
      - [External API Errors (Nostr Relays)](./11-error-handling-strategy.md#external-api-errors-nostr-relays)
      - [Business Logic Errors](./11-error-handling-strategy.md#business-logic-errors)
      - [Data Consistency](./11-error-handling-strategy.md#data-consistency)
  - [12. Coding Standards](./12-coding-standards.md)
    - [12.1 Core Standards](./12-coding-standards.md#121-core-standards)
    - [12.2 Naming Conventions](./12-coding-standards.md#122-naming-conventions)
    - [12.3 Critical Rules](./12-coding-standards.md#123-critical-rules)
  - [13. Test Strategy and Standards](./13-test-strategy-and-standards.md)
    - [13.1 Testing Philosophy](./13-test-strategy-and-standards.md#131-testing-philosophy)
    - [13.2 Test Types and Organization](./13-test-strategy-and-standards.md#132-test-types-and-organization)
      - [Unit Tests](./13-test-strategy-and-standards.md#unit-tests)
      - [Integration Tests](./13-test-strategy-and-standards.md#integration-tests)
      - [E2E Tests](./13-test-strategy-and-standards.md#e2e-tests)
    - [13.3 Test Data Management](./13-test-strategy-and-standards.md#133-test-data-management)
    - [13.4 Continuous Testing](./13-test-strategy-and-standards.md#134-continuous-testing)
  - [14. Security](./14-security.md)
    - [14.1 Input Validation](./14-security.md#141-input-validation)
    - [14.2 Authentication & Authorization](./14-security.md#142-authentication-authorization)
    - [14.3 Secrets Management](./14-security.md#143-secrets-management)
    - [14.4 API Security](./14-security.md#144-api-security)
    - [14.5 Data Protection](./14-security.md#145-data-protection)
    - [14.6 Dependency Security](./14-security.md#146-dependency-security)
    - [14.7 Security Testing](./14-security.md#147-security-testing)
  - [15. Checklist Results Report](./15-checklist-results-report.md)
  - [16. Next Steps](./16-next-steps.md)
    - [16.1 Immediate Actions](./16-next-steps.md#161-immediate-actions)
    - [16.2 Development Sequence](./16-next-steps.md#162-development-sequence)
    - [16.3 Architecture Document Sharding](./16-next-steps.md#163-architecture-document-sharding)
